<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Survey — Dentists</title>
  <style>
    :root{--maxw:1000px;--muted:#666}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;line-height:1.45;margin:0;background:#f6f7fb;color:#111}
    .container{max-width:var(--maxw);margin:28px auto;padding:24px;background:#fff;border-radius:10px;box-shadow:0 6px 24px rgba(18,38,63,0.08)}
    h1{margin:0 0 6px;font-size:22px}
    p.lead{margin:0 0 18px;color:var(--muted)}
    fieldset{border:1px solid #e6e8ee;padding:16px;border-radius:8px;margin-bottom:18px}
    legend{font-weight:600}
    .row{display:flex;flex-wrap:wrap;gap:12px}
    .col{flex:1 1 220px;min-width:220px}
    label{display:block;font-weight:600;margin-bottom:6px}
    .muted{color:var(--muted);font-weight:400;font-size:13px}
    input[type="text"], input[type="number"], select, textarea{width:100%;padding:8px;border:1px solid #d9dbe5;border-radius:6px}
    textarea{min-height:80px}
    .inline{display:flex;gap:8px;align-items:center}
    .checks{display:flex;flex-direction:column;gap:6px}
    .treatment-grid{display:grid;grid-template-columns:1fr 110px 110px;gap:8px;align-items:center}
    .small{font-size:13px}
    button{background:#0b63ff;color:#fff;border:0;padding:10px 14px;border-radius:8px;font-weight:600;cursor:pointer}
    .actions{display:flex;gap:8px;justify-content:flex-end}
    .note{font-size:13px;color:var(--muted)}
    @media (max-width:560px){.treatment-grid{grid-template-columns:1fr 1fr}}
    .hr{height:1px;background:#eef0f6;margin:12px 0;border-radius:2px}
  </style>
</head>
<body>
  <div class="container">
    <h1>Survey — dentists</h1>
    <p class="lead">Purpose: understand costs associated with treatment of dental caries and sequelae across practice settings and regions. Estimated time: <strong>10–15 minutes</strong>.</p>

    <form id="dentistSurvey" action="https://formspree.io/f/mvgqdjqv" method="POST" accept-charset="utf-8">

      <fieldset>
        <legend>Section 1 — Demographics & practice setting</legend>
        <div class="row">
          <div class="col">
            <label for="country">Country and region you represent</label>
            <input id="country" name="country" list="countries" placeholder="Start typing or choose...">
            <datalist id="countries">
              <option>United Kingdom</option>
              <option>United States</option>
              <option>Canada</option>
              <option>Australia</option>
              <option>India</option>
              <option>Russia</option>
              <option>Brazil</option>
              <option>South Africa</option>
              <option>Germany</option>
              <option>France</option>
              <!-- add more as desired -->
            </datalist>
            <p class="muted small">If you work in more than one country, please complete the survey separately for each country.</p>
          </div>

          <div class="col">
            <label>Area</label>
            <div class="inline">
              <label><input type="radio" name="area" value="Urban" required> Urban</label>
              <label><input type="radio" name="area" value="Suburban"> Suburban</label>
              <label><input type="radio" name="area" value="Rural"> Rural</label>
            </div>
          </div>

          <div class="col">
            <label for="role">Primary role</label>
            <select id="role" name="role" required>
              <option value="">-- choose --</option>
              <option>General dentist</option>
              <option>Specialist dentist (e.g., endodontist)</option>
              <option>Dental student</option>
              <option>Other</option>
            </select>
            <input type="text" id="role_other" name="role_other" placeholder="If Other, please specify" style="margin-top:8px;display:none">
          </div>

          <div class="col">
            <label for="experience">Years of experience</label>
            <select id="experience" name="experience" required>
              <option value="">-- choose --</option>
              <option>0–5 years</option>
              <option>6–10 years</option>
              <option>11–20 years</option>
              <option>21+ years</option>
            </select>
          </div>

          <div class="col">
            <label for="practice">Practice setting</label>
            <select id="practice" name="practice" required>
              <option value="">-- choose --</option>
              <option>Private clinic</option>
              <option>Public/government clinic</option>
              <option>Academic institution</option>
              <option>Hospital</option>
              <option>Other</option>
            </select>
            <input type="text" id="practice_other" name="practice_other" placeholder="If Other, please specify" style="margin-top:8px;display:none">
          </div>
        </div>
      </fieldset>

      <!-- Section 2: Treatment costs (repeatable per condition) -->

      <fieldset>
        <legend>Section 2 — Treatment costs</legend>
        <p class="note">For each listed condition, select the most common treatments used and enter public/private costs where available. Leave blank if unknown.</p>

        <!-- Helper to render one condition block. For brevity in the HTML file we write each block explicitly -->

        <!-- Cost of Caries -->
        <div style="margin-bottom:12px">
          <h3>Cost of Caries</h3>
          <div class="treatment-grid">
            <div><strong>Treatment</strong></div>
            <div><strong>Cost (public)</strong></div>
            <div><strong>Cost (private)</strong></div>

            <label class="small">Local anaesthesia</label>
            <input type="number" step="0.01" name="caries_localanaesthesia_public" placeholder="£ or local" />
            <input type="number" step="0.01" name="caries_localanaesthesia_private" placeholder="£ or local" />

            <label class="small">Filling (amalgam)</label>
            <input type="number" step="0.01" name="caries_amalgam_public" />
            <input type="number" step="0.01" name="caries_amalgam_private" />

            <label class="small">Filling (resin composite)</label>
            <input type="number" step="0.01" name="caries_resin_public" />
            <input type="number" step="0.01" name="caries_resin_private" />

            <label class="small">Filling (glass ionomer)</label>
            <input type="number" step="0.01" name="caries_gi_public" />
            <input type="number" step="0.01" name="caries_gi_private" />

            <label class="small">Other (specify)</label>
            <input type="text" name="caries_other_name" placeholder="e.g., temporary dressing" />
            <div style="display:flex;gap:8px">
              <input type="number" step="0.01" name="caries_other_public" placeholder="public" />
              <input type="number" step="0.01" name="caries_other_private" placeholder="private" />
            </div>
          </div>

          <div style="margin-top:10px">
            <label>Staffing cost (public)</label>
            <input type="number" step="0.01" name="caries_staffing_public" />
            <label style="margin-top:8px">Staffing cost (private)</label>
            <input type="number" step="0.01" name="caries_staffing_private" />

            <label style="margin-top:8px">Total cost per treatment (estimate per patient)</label>
            <input type="number" step="0.01" name="caries_total" />

            <div class="hr"></div>
            <label>Indirect costs to patient (average per case)</label>
            <div class="row">
              <div class="col">
                <label class="small">Travel to treatment centre</label>
                <input type="number" step="0.01" name="caries_indirect_travel" />
              </div>
              <div class="col">
                <label class="small">Childcare during treatment</label>
                <input type="number" step="0.01" name="caries_indirect_childcare" />
              </div>
              <div class="col">
                <label class="small">Out-of-pocket medication (%)</label>
                <input type="number" step="0.1" name="caries_indirect_med_pct" />
              </div>
            </div>

            <label style="margin-top:8px">Other indirect costs (specify)</label>
            <input type="text" name="caries_indirect_other_name" placeholder="e.g., transport pass" />
            <input type="number" step="0.01" name="caries_indirect_other_value" placeholder="value" />

            <div class="hr"></div>
            <label>Productivity loss</label>
            <div class="row">
              <div class="col">
                <label class="small">Average time off work per year for treatment</label>
                <input type="text" name="caries_prod_treatment" placeholder="e.g., 4 hours or 0.5 days" />
              </div>
              <div class="col">
                <label class="small">Average time off work per year if untreated</label>
                <input type="text" name="caries_prod_untreated" />
              </div>
              <div class="col">
                <label class="small">Average duration of pain per year if untreated (days)</label>
                <input type="number" step="0.1" name="caries_pain_duration" />
              </div>
            </div>
          </div>
        </div>

        <!-- Repeat similar blocks for other conditions: Deep Caries, Pulpitis, Apical Periodontitis, Periapical Abscess, Cellulitis/Osteomyelitis, Endodontic Lesions -->

        <!-- For brevity we include all but keep names distinct -->

        <!-- Deep Caries -->
        <div style="margin-bottom:12px">
          <h3>Cost of Deep Caries</h3>
          <div class="treatment-grid">
            <div><strong>Treatment</strong></div>
            <div><strong>Cost (public)</strong></div>
            <div><strong>Cost (private)</strong></div>

            <label class="small">Local anaesthesia</label>
            <input type="number" step="0.01" name="deep_localanaesthesia_public" />
            <input type="number" step="0.01" name="deep_localanaesthesia_private" />

            <label class="small">Filling (amalgam)</label>
            <input type="number" step="0.01" name="deep_amalgam_public" />
            <input type="number" step="0.01" name="deep_amalgam_private" />

            <label class="small">Filling (resin composite)</label>
            <input type="number" step="0.01" name="deep_resin_public" />
            <input type="number" step="0.01" name="deep_resin_private" />

            <label class="small">Filling (glass ionomer)</label>
            <input type="number" step="0.01" name="deep_gi_public" />
            <input type="number" step="0.01" name="deep_gi_private" />

            <label class="small">Crown (ceramic/porcelain/metal/resin)</label>
            <input type="number" step="0.01" name="deep_crown_public" />
            <input type="number" step="0.01" name="deep_crown_private" />

            <label class="small">Extraction</label>
            <input type="number" step="0.01" name="deep_extraction_public" />
            <input type="number" step="0.01" name="deep_extraction_private" />

            <label class="small">Other (specify)</label>
            <input type="text" name="deep_other_name" />
            <div style="display:flex;gap:8px">
              <input type="number" step="0.01" name="deep_other_public" />
              <input type="number" step="0.01" name="deep_other_private" />
            </div>
          </div>

          <div style="margin-top:10px">
            <label>Staffing cost: public</label>
            <input type="number" step="0.01" name="deep_staffing_public" />
            <label>Staffing cost: private</label>
            <input type="number" step="0.01" name="deep_staffing_private" />
            <label>Total cost per treatment (estimate per patient)</label>
            <input type="number" step="0.01" name="deep_total" />

            <div class="hr"></div>
            <label>Indirect costs to patient (average per case)</label>
            <div class="row">
              <div class="col"><label class="small">Travel</label><input type="number" step="0.01" name="deep_indirect_travel" /></div>
              <div class="col"><label class="small">Childcare</label><input type="number" step="0.01" name="deep_indirect_childcare" /></div>
              <div class="col"><label class="small">Out-of-pocket medication (%)</label><input type="number" step="0.1" name="deep_indirect_med_pct" /></div>
            </div>

            <label>Other indirect (specify)</label><input type="text" name="deep_indirect_other_name" />
            <input type="number" step="0.01" name="deep_indirect_other_value" />

            <div class="hr"></div>
            <label>Productivity loss</label>
            <div class="row">
              <div class="col"><label class="small">Time off for treatment</label><input type="text" name="deep_prod_treatment" /></div>
              <div class="col"><label class="small">Time off if untreated</label><input type="text" name="deep_prod_untreated" /></div>
              <div class="col"><label class="small">Duration of pain if untreated (days)</label><input type="number" step="0.1" name="deep_pain_duration" /></div>
            </div>
          </div>
        </div>

        <!-- Pulpitis -->
        <div style="margin-bottom:12px">
          <h3>Cost of Pulpitis</h3>
          <div class="treatment-grid">
            <div><strong>Treatment</strong></div>
            <div><strong>Cost (public)</strong></div>
            <div><strong>Cost (private)</strong></div>

            <label class="small">Local anaesthesia</label>
            <input type="number" step="0.01" name="pulp_localanaesthesia_public" />
            <input type="number" step="0.01" name="pulp_localanaesthesia_private" />

            <label class="small">Filling (amalgam)</label>
            <input type="number" step="0.01" name="pulp_amalgam_public" />
            <input type="number" step="0.01" name="pulp_amalgam_private" />

            <label class="small">Filling (resin composite)</label>
            <input type="number" step="0.01" name="pulp_resin_public" />
            <input type="number" step="0.01" name="pulp_resin_private" />

            <label class="small">Filling (glass ionomer)</label>
            <input type="number" step="0.01" name="pulp_gi_public" />
            <input type="number" step="0.01" name="pulp_gi_private" />

            <label class="small">Antibiotics</label>
            <input type="number" step="0.01" name="pulp_antibiotics_public" />
            <input type="number" step="0.01" name="pulp_antibiotics_private" />

            <label class="small">Pulp removal</label>
            <input type="number" step="0.01" name="pulp_pulpremoval_public" />
            <input type="number" step="0.01" name="pulp_pulpremoval_private" />

            <label class="small">Root canal treatment</label>
            <input type="number" step="0.01" name="pulp_rootcanal_public" />
            <input type="number" step="0.01" name="pulp_rootcanal_private" />

            <label class="small">Crown</label>
            <input type="number" step="0.01" name="pulp_crown_public" />
            <input type="number" step="0.01" name="pulp_crown_private" />

            <label class="small">Extraction</label>
            <input type="number" step="0.01" name="pulp_extraction_public" />
            <input type="number" step="0.01" name="pulp_extraction_private" />

            <label class="small">Other (specify)</label>
            <input type="text" name="pulp_other_name" />
            <div style="display:flex;gap:8px"><input type="number" step="0.01" name="pulp_other_public" /><input type="number" step="0.01" name="pulp_other_private" /></div>
          </div>

          <div style="margin-top:10px">
            <label>Staffing cost: public</label><input type="number" step="0.01" name="pulp_staffing_public" />
            <label>Staffing cost: private</label><input type="number" step="0.01" name="pulp_staffing_private" />
            <label>Total cost per treatment (estimate per patient)</label><input type="number" step="0.01" name="pulp_total" />

            <div class="hr"></div>
            <label>Indirect costs to patient (average per case)</label>
            <div class="row">
              <div class="col"><label class="small">Travel</label><input type="number" step="0.01" name="pulp_indirect_travel" /></div>
              <div class="col"><label class="small">Childcare</label><input type="number" step="0.01" name="pulp_indirect_childcare" /></div>
              <div class="col"><label class="small">Out-of-pocket medication (%)</label><input type="number" step="0.1" name="pulp_indirect_med_pct" /></div>
            </div>
            <label>Other indirect (specify)</label><input type="text" name="pulp_indirect_other_name" />
            <input type="number" step="0.01" name="pulp_indirect_other_value" />

            <div class="hr"></div>
            <label>Productivity loss</label>
            <div class="row">
              <div class="col"><label class="small">Time off for treatment</label><input type="text" name="pulp_prod_treatment" /></div>
              <div class="col"><label class="small">Time off if untreated</label><input type="text" name="pulp_prod_untreated" /></div>
              <div class="col"><label class="small">Duration of pain if untreated (days)</label><input type="number" step="0.1" name="pulp_pain_duration" /></div>
            </div>
          </div>
        </div>

        <!-- Apical Periodontitis -->
        <div style="margin-bottom:12px">
          <h3>Cost of Apical Periodontitis</h3>
          <div class="treatment-grid">
            <div><strong>Treatment</strong></div>
            <div><strong>Cost (public)</strong></div>
            <div><strong>Cost (private)</strong></div>

            <label class="small">Local anaesthesia</label>
            <input type="number" step="0.01" name="apic_localanaesthesia_public" />
            <input type="number" step="0.01" name="apic_localanaesthesia_private" />

            <label class="small">Root canal treatment</label>
            <input type="number" step="0.01" name="apic_rootcanal_public" />
            <input type="number" step="0.01" name="apic_rootcanal_private" />

            <label class="small">Periapical surgery (apicoectomy)</label>
            <input type="number" step="0.01" name="apic_apicoectomy_public" />
            <input type="number" step="0.01" name="apic_apicoectomy_private" />

            <label class="small">Filling materials</label>
            <input type="number" step="0.01" name="apic_filling_public" />
            <input type="number" step="0.01" name="apic_filling_private" />

            <label class="small">Extraction</label>
            <input type="number" step="0.01" name="apic_extraction_public" />
            <input type="number" step="0.01" name="apic_extraction_private" />

            <label class="small">Other (specify)</label>
            <input type="text" name="apic_other_name" />
            <div style="display:flex;gap:8px"><input type="number" step="0.01" name="apic_other_public" /><input type="number" step="0.01" name="apic_other_private" /></div>
          </div>

          <div style="margin-top:10px">
            <label>Staffing cost: public</label><input type="number" step="0.01" name="apic_staffing_public" />
            <label>Staffing cost: private</label><input type="number" step="0.01" name="apic_staffing_private" />
            <label>Total cost per treatment (estimate per patient)</label><input type="number" step="0.01" name="apic_total" />

            <div class="hr"></div>
            <label>Indirect costs to patient (average per case)</label>
            <div class="row">
              <div class="col"><label class="small">Travel</label><input type="number" step="0.01" name="apic_indirect_travel" /></div>
              <div class="col"><label class="small">Childcare</label><input type="number" step="0.01" name="apic_indirect_childcare" /></div>
              <div class="col"><label class="small">Out-of-pocket medication (%)</label><input type="number" step="0.1" name="apic_indirect_med_pct" /></div>
            </div>

            <label>Other indirect (specify)</label><input type="text" name="apic_indirect_other_name" />
            <input type="number" step="0.01" name="apic_indirect_other_value" />

            <div class="hr"></div>
            <label>Productivity loss</label>
            <div class="row">
              <div class="col"><label class="small">Time off for treatment</label><input type="text" name="apic_prod_treatment" /></div>
              <div class="col"><label class="small">Time off if untreated</label><input type="text" name="apic_prod_untreated" /></div>
              <div class="col"><label class="small">Duration of pain if untreated (days)</label><input type="number" step="0.1" name="apic_pain_duration" /></div>
            </div>
          </div>
        </div>

        <!-- Periapical Abscess -->
        <div style="margin-bottom:12px">
          <h3>Cost of Periapical Abscess</h3>
          <div class="treatment-grid">
            <div><strong>Treatment</strong></div>
            <div><strong>Cost (public)</strong></div>
            <div><strong>Cost (private)</strong></div>

            <label class="small">Root canal</label>
            <input type="number" step="0.01" name="abscess_rootcanal_public" />
            <input type="number" step="0.01" name="abscess_rootcanal_private" />

            <label class="small">Tooth extraction</label>
            <input type="number" step="0.01" name="abscess_extraction_public" />
            <input type="number" step="0.01" name="abscess_extraction_private" />

            <label class="small">Incision and drainage</label>
            <input type="number" step="0.01" name="abscess_iandd_public" />
            <input type="number" step="0.01" name="abscess_iandd_private" />

            <label class="small">Other (specify)</label>
            <input type="text" name="abscess_other_name" />
            <div style="display:flex;gap:8px"><input type="number" step="0.01" name="abscess_other_public" /><input type="number" step="0.01" name="abscess_other_private" /></div>
          </div>

          <div style="margin-top:10px">
            <label>Staffing cost: public</label><input type="number" step="0.01" name="abscess_staffing_public" />
            <label>Staffing cost: private</label><input type="number" step="0.01" name="abscess_staffing_private" />
            <label>Total cost per treatment (estimate per patient)</label><input type="number" step="0.01" name="abscess_total" />

            <div class="hr"></div>
            <label>Indirect costs to patient (average per case)</label>
            <div class="row">
              <div class="col"><label class="small">Travel</label><input type="number" step="0.01" name="abscess_indirect_travel" /></div>
              <div class="col"><label class="small">Childcare</label><input type="number" step="0.01" name="abscess_indirect_childcare" /></div>
              <div class="col"><label class="small">Out-of-pocket medication (%)</label><input type="number" step="0.1" name="abscess_indirect_med_pct" /></div>
            </div>

            <label>Other indirect (specify)</label><input type="text" name="abscess_indirect_other_name" />
            <input type="number" step="0.01" name="abscess_indirect_other_value" />

            <div class="hr"></div>
            <label>Productivity loss</label>
            <div class="row">
              <div class="col"><label class="small">Time off for treatment</label><input type="text" name="abscess_prod_treatment" /></div>
              <div class="col"><label class="small">Time off if untreated</label><input type="text" name="abscess_prod_untreated" /></div>
              <div class="col"><label class="small">Duration of pain if untreated (days)</label><input type="number" step="0.1" name="abscess_pain_duration" /></div>
            </div>
          </div>
        </div>

        <!-- Cellulitis / Osteomyelitis -->
        <div style="margin-bottom:12px">
          <h3>Cost of Cellulitis / Osteomyelitis</h3>
          <div class="treatment-grid">
            <div><strong>Treatment</strong></div>
            <div><strong>Cost (public)</strong></div>
            <div><strong>Cost (private)</strong></div>

            <label class="small">Antibiotics</label>
            <input type="number" step="0.01" name="cell_antibiotics_public" />
            <input type="number" step="0.01" name="cell_antibiotics_private" />

            <label class="small">Extraction</label>
            <input type="number" step="0.01" name="cell_extraction_public" />
            <input type="number" step="0.01" name="cell_extraction_private" />

            <label class="small">Incision and drainage</label>
            <input type="number" step="0.01" name="cell_iandd_public" />
            <input type="number" step="0.01" name="cell_iandd_private" />

            <label class="small">Implant (if required)</label>
            <input type="number" step="0.01" name="cell_implant_public" />
            <input type="number" step="0.01" name="cell_implant_private" />

            <label class="small">Other (specify)</label>
            <input type="text" name="cell_other_name" />
            <div style="display:flex;gap:8px"><input type="number" step="0.01" name="cell_other_public" /><input type="number" step="0.01" name="cell_other_private" /></div>
          </div>

          <div style="margin-top:10px">
            <label>Staffing cost: public</label><input type="number" step="0.01" name="cell_staffing_public" />
            <label>Staffing cost: private</label><input type="number" step="0.01" name="cell_staffing_private" />
            <label>Total cost per treatment (estimate per patient)</label><input type="number" step="0.01" name="cell_total" />

            <div class="hr"></div>
            <label>Indirect costs to patient (average per case)</label>
            <div class="row">
              <div class="col"><label class="small">Travel</label><input type="number" step="0.01" name="cell_indirect_travel" /></div>
              <div class="col"><label class="small">Childcare</label><input type="number" step="0.01" name="cell_indirect_childcare" /></div>
              <div class="col"><label class="small">Out-of-pocket medication (%)</label><input type="number" step="0.1" name="cell_indirect_med_pct" /></div>
            </div>

            <label>Other indirect (specify)</label><input type="text" name="cell_indirect_other_name" />
            <input type="number" step="0.01" name="cell_indirect_other_value" />

            <div class="hr"></div>
            <label>Productivity loss</label>
            <div class="row">
              <div class="col"><label class="small">Time off for treatment</label><input type="text" name="cell_prod_treatment" /></div>
              <div class="col"><label class="small">Time off if untreated</label><input type="text" name="cell_prod_untreated" /></div>
              <div class="col"><label class="small">Duration of pain if untreated (days)</label><input type="number" step="0.1" name="cell_pain_duration" /></div>
            </div>
          </div>
        </div>

        <!-- Endodontic Lesions -->
        <div style="margin-bottom:12px">
          <h3>Cost of Endodontic Lesions</h3>
          <div class="treatment-grid">
            <div><strong>Treatment</strong></div>
            <div><strong>Cost (public)</strong></div>
            <div><strong>Cost (private)</strong></div>

            <label class="small">Endodontic treatment</label>
            <input type="number" step="0.01" name="end_endot_public" />
            <input type="number" step="0.01" name="end_endot_private" />

            <label class="small">Root canal</label>
            <input type="number" step="0.01" name="end_rootcanal_public" />
            <input type="number" step="0.01" name="end_rootcanal_private" />

            <label class="small">Tooth extraction</label>
            <input type="number" step="0.01" name="end_extraction_public" />
            <input type="number" step="0.01" name="end_extraction_private" />

            <label class="small">Incision and drainage</label>
            <input type="number" step="0.01" name="end_iandd_public" />
            <input type="number" step="0.01" name="end_iandd_private" />

            <label class="small">Enucleation</label>
            <input type="number" step="0.01" name="end_enucleation_public" />
            <input type="number" step="0.01" name="end_enucleation_private" />

            <label class="small">Other (specify)</label>
            <input type="text" name="end_other_name" />
            <div style="display:flex;gap:8px"><input type="number" step="0.01" name="end_other_public" /><input type="number" step="0.01" name="end_other_private" /></div>
          </div>

          <div style="margin-top:10px">
            <label>Staffing cost: public</label><input type="number" step="0.01" name="end_staffing_public" />
            <label>Staffing cost: private</label><input type="number" step="0.01" name="end_staffing_private" />
            <label>Total cost per treatment (estimate per patient)</label><input type="number" step="0.01" name="end_total" />

            <div class="hr"></div>
            <label>Indirect costs to patient (average per case)</label>
            <div class="row">
              <div class="col"><label class="small">Travel</label><input type="number" step="0.01" name="end_indirect_travel" /></div>
              <div class="col"><label class="small">Childcare</label><input type="number" step="0.01" name="end_indirect_childcare" /></div>
              <div class="col"><label class="small">Out-of-pocket medication (%)</label><input type="number" step="0.1" name="end_indirect_med_pct" /></div>
            </div>

            <label>Other indirect (specify)</label><input type="text" name="end_indirect_other_name" />
            <input type="number" step="0.01" name="end_indirect_other_value" />

            <div class="hr"></div>
            <label>Productivity loss</label>
            <div class="row">
              <div class="col"><label class="small">Time off for treatment</label><input type="text" name="end_prod_treatment" /></div>
              <div class="col"><label class="small">Time off if untreated</label><input type="text" name="end_prod_untreated" /></div>
              <div class="col"><label class="small">Duration of pain if untreated (days)</label><input type="number" step="0.1" name="end_pain_duration" /></div>
            </div>
          </div>
        </div>

      </fieldset>

      <fieldset>
        <legend>Section 4 — Influencing factors</legend>
        <p class="muted">9. Rank in order of influence from 1 (most influential) to 5.</p>
        <div style="display:grid;grid-template-columns:1fr 80px;gap:8px;align-items:center">
          <label>Clinical severity</label><input type="number" min="1" max="5" name="rank_clinical" />
          <label>Affordability</label><input type="number" min="1" max="5" name="rank_affordability" />
          <label>Accessibility (availability of service)</label><input type="number" min="1" max="5" name="rank_accessibility" />
          <label>Cultural preferences</label><input type="number" min="1" max="5" name="rank_cultural" />
          <label>Insurance coverage or reimbursement</label><input type="number" min="1" max="5" name="rank_insurance" />
        </div>

        <div style="margin-top:12px">
          <label>10. In your opinion, how often is extraction chosen due to lack of access to endodontic services?</label>
          <select name="q10_access_extraction" required>
            <option value="">-- choose --</option>
            <option>Very often</option>
            <option>Often</option>
            <option>Sometimes</option>
            <option>Rarely</option>
            <option>Never</option>
          </select>
        </div>
      </fieldset>

      <fieldset>
        <legend>Section 5 — Final thoughts (optional)</legend>
        <label>11. In your experience, what barriers most limit the delivery of optimal care for caries and its sequelae?</label>
        <textarea name="q11_barriers" placeholder="Open text response"></textarea>

        <label style="margin-top:8px">12. Additional comments or suggestions for improving management pathways in your setting</label>
        <textarea name="q12_comments" placeholder="Open text response"></textarea>
      </fieldset>

      <div class="actions">
        <button type="button" onclick="downloadJSON()">Download responses (JSON)</button>
        <button type="submit">Submit</button>
      </div>
    </form>

    <p class="note" style="margin-top:12px">Note: this form collects no personally identifying information unless you enter it in the free-text fields. To connect this form to a database or email, replace the form submission handler in the script with your endpoint (e.g., Formspree, Google Apps Script, or a server-side script).</p>
  </div>

  <script>
    // show 'Other' inputs when Other selected
    document.getElementById('role').addEventListener('change', e=>{
      document.getElementById('role_other').style.display = e.target.value === 'Other' ? 'block':'none';
    });
    document.getElementById('practice').addEventListener('change', e=>{
      document.getElementById('practice_other').style.display = e.target.value === 'Other' ? 'block':'none';
    });

    // Form submit: default behaviour -> prevent and show JSON download prompt
   // const form = document.getElementById('dentistSurvey');
   // form.addEventListener('submit', function(e){
   //   e.preventDefault();
   //   const data = new FormData(form);
   //   const obj = {};
   //   data.forEach((v,k)=>{
        // handle duplicate keys by making arrays
   //     if(Object.prototype.hasOwnProperty.call(obj,k)){
   //       if(!Array.isArray(obj[k])) obj[k]=[obj[k]];
   //       obj[k].push(v);
   //     } else obj[k]=v;
   //   });
      // show simple confirmation then offer download
      if(confirm('Thank you — your responses have been captured locally. Click OK to download a JSON copy of your responses.')){
        const blob = new Blob([JSON.stringify(obj,null,2)],{type:'application/json'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url; a.download = 'survey_response.json'; a.click();
        URL.revokeObjectURL(url);
      }
    });

    function downloadJSON(){
      const data = new FormData(form);
      const obj = {};
      data.forEach((v,k)=>{ if(Object.prototype.hasOwnProperty.call(obj,k)){ if(!Array.isArray(obj[k])) obj[k]=[obj[k]]; obj[k].push(v);} else obj[k]=v; });
      const blob = new Blob([JSON.stringify(obj,null,2)],{type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download='survey_responses.json'; a.click(); URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>
